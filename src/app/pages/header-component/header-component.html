<nav class="bg-white shadow-md px-6 py-4 flex items-center justify-between sticky top-0 z-50">
  <a routerLink="/productsComponent" class="flex items-center gap-3">
    <img src="images/shopsy.png" alt="Shopsy logo" class="h-10 w-10" />
    <span class="font-bold text-2xl text-gray-800">Shopsy</span>
  </a>

  <div class="hidden md:flex items-center gap-8">
    <a routerLink="/productsComponent"
       class="text-gray-700 hover:text-blue-600 font-medium transition"
       routerLinkActive="!text-blue-600 !font-bold"
       [routerLinkActiveOptions]="{ exact: true }">
       Products
    </a>

    <a (click)="toggleCart()"
       class="flex items-center gap-2 text-gray-700 hover:text-blue-600 font-medium transition">
       Cart
    </a>

    @if (!isLoggedIn()) {
      <a routerLink="/login"
         class="px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition">
         Login
      </a>
    } @else {
      <button (click)="logOut()"
              class="px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition">
         Logout
      </button>
    }
  </div>

  <button class="md:hidden p-2 rounded-md hover:bg-gray-100" 
          (click)="toggleMenu()" aria-label="Toggle menu">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
         fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>
</nav>

@if (isMenuOpen) {
  <div class="md:hidden fixed top-[64px] left-0 w-full bg-white shadow-md z-40 animate-slideDown">
    <a routerLink="/productsComponent"
       class="block px-6 py-3 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium"
       routerLinkActive="!text-blue-600 !font-bold"
       [routerLinkActiveOptions]="{ exact: true }"
       (click)="toggleMenu()">
       Products
    </a>

    <a
       class="block px-6 py-3 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium"
       (click)="toggleCart(); toggleMenu()">
       Cart
    </a>

    @if (!isLoggedIn()) {
      <a routerLink="/login"
         class="block w-full px-6 py-3 bg-blue-500 text-white hover:bg-blue-600 font-medium transition"
         (click)="toggleMenu()">
         Login
      </a>
    } @else {
      <button (click)="logOut(); toggleMenu()"
              class="block w-full px-6 py-3 bg-red-500 text-white hover:bg-red-600 font-medium transition">
         Logout
      </button>
    }
  </div>
}

<app-cart-component [isOpen]="cartOpen" (close)="closeCart()"></app-cart-component>

<router-outlet></router-outlet>
